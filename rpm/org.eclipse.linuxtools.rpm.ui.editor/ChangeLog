2007-07-14  Alphonse Van Assche   <alcapcom@gmail.com>

	* src/org/eclipse/linuxtools/rpm/ui/editor/wizards/SpecfileNewWizardPage.java: 
	Replace String#contains by String#indexOf for JRE 1.4 compatibility.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileConfiguration.java: 
	Moving Annotation Hover to derived package.
	* Too many files to list: Add contributor line.
	
2007-07-13  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfilePackagesScanner.java:
	Fix copyright.
	* src/org/eclipse/linuxtools/rpm/ui/editor/PackageWordDetector.java:
	Likewise.

2007-07-05  Andrew Overholt  <overholt@redhat.com>

	* Too many files to list: Add standard copyright and license header.

2007-06-25  Alphonse Van Assche   <alcapcom@gmail.com>

	* src/org/eclipse/linuxtools/rpm/ui/editor/wizards/SpecfileNewWizardPage.java:
	(dialogChanged): Forgot to add '>' char as un-acceptable character for the Name tag. 

2007-06-25  Alphonse Van Assche  <alcapcom@gmail.com>

	Add a wizard for new specfile based on a template provided by the
	rpmdevtools package.
	* src/org/eclipse/linuxtools/rpm/ui/editor/wizards/SpecfileNewWizard.java: New
	File.
	* src/org/eclipse/linuxtools/rpm/ui/editor/wizards/SpecfileNewWizardPage.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileLog.java:
	Likewise, The logger of convenience for the Specfile Plug-In.
	* plugin.xml: Add extensions points for the wizard. 

2007-06-22  Alphonse Van Assche  <alcapcom@gmail.com>

	* META-INF/MANIFEST.MF: Add new dependencie "com.ibm.icu" for LineBreakingReader
	derived class.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileErrorHandler.java:
	(setDocument): New method. It is used by the rpmlint Plug-In.	
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileErrorHandler.java: 
	(setFile): Likewise.
	(parse): Likewise.	
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileHover.java: 
	Using the derived HTMLTextPresenter class. That make the plugin compatible 
	with both 3.2 and 3.3 Eclipse versions.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileConfiguration.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/derived/HTML2TextReader.java: New
	New derived class.
	* src/org/eclipse/linuxtools/rpm/ui/editor/derived/SubstitutionTextReader.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/derived/SingleCharReader.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/derived/LineBreakingReader.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/derived/HTMLTextPresenter.java:
	Likewise.

2007-06-20  Alphonse Van Assche  <alcapcom@gmail.com>

	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileEditor.java 
	(dispose): Set specfile field to null, useful for test cases.
	(getSpecfileSourceViewer): New method used by HyperlinkWithMacroTests.
	
2007-06-20  Alphonse Van Assche  <alcapcom@gmail.com>

	* src/org/eclipse/linuxtools/rpm/ui/editor/RpmMacroOccurrencesUpdater.java 
	(isDefineChar): Add '?' char as define limiter.
	* src/org/eclipse/linuxtools/rpm/ui/editor/PackageWordDetector.java 
	(isWordPart): Add '+' char. 
	* icons/occurence_obj.gif New file. 

2007-06-05  Alphonse Van Assche  <alcapcom@gmail.com>

	Bug #182633
	* src/org/eclipse/linuxtools/rpm/ui/editor/Activator.java
	(getImage): New method.
	* src/org/eclipse/linuxtools/rpm/ui/editor/outline/SpecfileLabelProvider.java
	(PREAMBLE_ICON): New global var for icon.
	(SECTION_ICON): Likewise.
	(PACKAGES_ICON): Likewise.
	(PACKAGE_ICON): Likewise.
	(getImage): Take the above icons in account.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileCompletionProcessor.java
	(TEMPLATE_ICON): New global var for icon.
	(computeTemplateProposals): Using Activator.getImage() method.
	(computeRpmMacroProposals): Likewise.
	(computeRpmPackageProposals): Likewise.

2007-06-05  Alphonse Van Assche  <alcapcom@gmail.com>
	
	Bug: #184955
	* plugin.xml: add org.eclipse.ui.editors.markerAnnotationSpecification extension
	point.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileHover.java
	(getHoverInfo): using new methods.
	(getSourceOrPatchValue): New method used by RpmMacroOccuencesUpdater.
	(getMacroValueFromMacroList): New method used by RpmMacroOccuencesUpdater.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileConfiguration.java
	(getAnnotationHover): overload of getAnnotationHover() method from
	SourceViewerConfiguration.
	* src/org/eclipse/linuxtools/rpm/ui/editor/parser/Specfile.java
	(getDefinesAsList): New method.
	(getDefinesAsArray): New method.
	* src/org/eclipse/linuxtools/rpm/ui/editor/RpmMacroOccurrencesUpdater.java: New
	file.
	* src/org/eclipse/linuxtools/rpm/ui/editor/AnnotationHover.java: New file.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileEditor.java
	(setSpecfile): update macro occurences.

2007-06-04  Alphonse Van Assche  <alcapcom@gmail.com>

	* src/org/eclipse/linuxtools/rpm/ui/editor/parser/SpecfileParser.java
	(parsePatch): Parse %patch macro and Patch: directive without trailing number.
	(parseComplexDefinition): Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/parser/SpecfileSource.java
	(changeReferences): Likewise.
	(changeDeclaration): Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileScanner.java
	(SpecfileScanner): Scan %patch macro without trailing number.
	* src/org/eclipse/linuxtools/rpm/ui/editor/URLHyperlinkWithMacroDetector.java
	(detectHyperlinks): Check if IHyperlink[] is not null before try to get the
	lenght of it.

2007-06-04  Alphonse Van Assche  <alcapcom@gmail.com>

	* src/org/eclipse/linuxtools/rpm/ui/editor/actions/SpecfileChangelogFormatter.java 
	Fix ChangeLog entry action.
	(formatDateLine): Add escape char in pattern %{?dist} tag.

2007-05-04  Andrew Overholt  <overholt@redhat.com>

	Bug #185598
	* META-INF/MANIFEST.MF: Add "Incubation" to Bundle-Name.
	
2007-04-14  Alphonse Van Assche  <alcapcom@gmail.com>

	Bug #182302
	* src/org/eclipse/linuxtools/rpm/ui/editor/PackageWordDetector.java
	(isWordPart): Detect packages contain '_' char.
	(isWordStart): Add support for packages begining with ' ' | ',' | '\t' | ':'
	char.
	* src/org/eclipse/linuxtools/rpm/ui/editor/parser/SpecfileParser.java
	(parseLine): Fix tags parsing.
	(parseSimpleDefinition): Don't show warning about acronym error.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileScanner.java
	(sections): Add %clean and %check section.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfilePackagesScanner.java
	(PACKAGES_TAGS): Add Requires(hint)
	(SpecfilePackagesScanner): Detect packages that begin with ' ' | ',' | '\t' |
	':' char. Add comment support.

2007-04-10  Alphonse Van Assche  <alcapcom@gmail.com>

	Bug #181747
	* src/org/eclipse/linuxtools/rpm/ui/editor/URLHyperlinkWithMacroDetector.java:
	New class to resolve macro in URL.
	(detectHyperlinks): New method.
	(URLHyperlinkWithMacroDetector): Likewise.
	(resolveDefinesInURL): Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileConfiguration.java:
	(getHyperlinkDetectors): Use URLHyperlinkWithMacroDetector.

2007-04-10  Alphonse Van Assche  <alcapcom@gmail.com>

	Bug #181110
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileReconcilingStrategy.java:
	Update the editor without saving the file.
	(updateFolding): Don't create a specfile instance.
	(reconcile): Use the same method to reconcile.
	(SpecfileReconcilingStrategy): Remove unneeded code.
	(updateEditor): Update the specfile instance of the editor.
	* src/org/eclipse/linuxtools/rpm/ui/editor/parser/SpecfileParser.java
	(parseSimpleDefinition): Cleanup.
	(parseComplexDefinition): Remove all existing error handler markers before
	parsing the file.
	(parse): Remove workarounds which are no longer needed.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileCompletionProcessor.java
	(getContextType): Fix array out of bounds bug with incomplete specfiles.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileFoldingStructureProvider.java
	(updateFoldingRegions): Use the Specfile instance in the editor one.

2007-04-08  Alphonse Van Assche  <alcapcom@gmail.com>

	Bug #181245
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileScanner.java: Remove unneeded
	RPM tags, these tags are now taken into account by SpecfilePartitionScanner.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfilePackagesScanner.java: New
	file.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfilePartitionScanner.java: Add
	__spec_packages partition type. Use SpecfilePackagesScanner.PACKAGES_TAGS.
	(SpecfilePartitionScanner): Add new scan rules for the__spec_packages partition.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileHover.java: Add hover support
	for RPM packages.
	(findPackages): New method.
	(getHoverRegion): Add support for findPackages() method.
	(getHoverInfo): Get RPM package hover information. Rename macroName to
	currentSelection to reflect the current code.
	(getHoverControlCreator): Use HTMLTextPresenter as information control
	presenter.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileConfiguration.java: Add
	support for the RPM packages content type.
	(getSpecfilePackagesScanner): New method.
	(getPresentationReconciler): Reconcile packages.
	(getContentAssistant): Set content assistant for packages content type.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileCompletionProcessor.java: Add
	completion support for the __spec_packages partition type.
	(computeRpmPackageProposals): Show only proposals on lines begining with
	Requires, BuildRequires, etc.
	* src/org/eclipse/linuxtools/rpm/ui/editor/RpmPackageProposalsList.java: Add a
	method used by SpecfilePartionScanner.getHoverInfo() to retrieve package.
	information.
	(getValue): New method.
	* src/org/eclipse/linuxtools/rpm/ui/editor/PackageWordDetector.java: New file.
	Add packages word detection.
	* src/org/eclipse/linuxtools/rpm/ui/editor/ISpecfileColorConstants.java: Add
	color constant for packages.

2007-04-06  Alphonse Van Assche  <alcapcom@gmail.com>

	* src/org/eclipse/linuxtools/rpm/ui/editor/RpmMacroProposalsList.java
	(getValue): Escape "?" character in regex. Bug #181395.

2007-04-05  Remy Suen  <remy.suen@gmail.com>

	Bug #181249
	* META-INF/MANIEST.MF: Set the Bundle-RequiredExecutionEnvironment attribute to
	J2SE-1.4.

2007-04-05  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/linuxtools/rpm/ui/editor/RpmMacroProposalsList.java
	(getProposals): Escape "{" character in regex.

2007-04-04  Andrew Overholt  <overholt@redhat.com>

	This large functionality addition was done by Alphonse Van Assche. The
	discussion surrounding it is available at
	https://bugs.eclipse.org/bugs/show_bug.cgi?id=177220.
	* .classpath: Add J2SE-1.4 preferred EE.
	* build.properties: Add icons and templates to binary build.
	* icons/changelog.gif: Remove apparently unused icon.
	* META-INF/MANIFEST.MF: Change changelog requirement to new namespace. Add
	* plugin.xml: Update class namespace for editor extension. Update changelog
	extension point locations. Add templates and preferences extensions. preferences
	to package export list.
	* src/org/eclipse/linuxtools/rpm/ui/editor/Activator.java: Add template,
	contextType, and macro and package completion variables.
	(getTemplateStore): New method.
	(getRpmMacroList): Likewise.
	(getRpmPackageList): Likewise.
	(getContextTypeRegistry): Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/RpmMacroProposalsList.java: Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/RpmPackageProposalsList.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileCompletionProcessor.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileConfiguration.java
	(getReconciler): Change delay to 500 ms.
	(getContentAssistant): New method.
	(getInformationControlCreator): New method.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileEditor.java
	(getAdapter): Add projectionSupport.
	(getResourceBundle): New method.
	(createActions): Likewise.
	(createPartControl): Likewise.
	(createSourceViewer): Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileEditorMessages.properties:
	New file.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileFoldingStructureProvider.java:
	New file.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileHover.java
	(getHoverInfo): Add non-%source and non-%patch macro proposals.
	* src/org/eclipse/linuxtools/rpm/ui/editor/SpecfileReconcilingStrategy.java
	(SpecfileReconcilingStrategy): Add parser and foldingStructureProvider.
	(setDocument): Implement.
	(reconcile): Call reconcile().
	(initialReconcile): New method. Call reconcile().
	(reconcile): New method. Parse and update editor and folding.
	(setProgressMonitor): New method.
	(parseSpecfile): Likewise.
	(updateEditor): Likewise.
	(updateFolding): Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/actions/SpecfileChangelogParser.java:
	Update changelog import package name.
	* src/org/eclipse/linuxtools/rpm/ui/editor/actions/SpecfileChangelogFormatter.java
	(formatTodaysDate): Add locale-based formatting. Will probably want to re-visit
	this soon.
	* src/org/eclipse/linuxtools/rpm/ui/editor/parser/Specfile.java
	(getSectionsElements): New method. Used for determining when to offer completion
	proposals.
	* src/org/eclipse/linuxtools/rpm/ui/editor/parser/SpecfileParser.java
	(parseComplexDefinition): Add temporary workaround for null errorHandler.
	(parseSimpleDefinition): Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/preferences/MainPreferencePage.java:
	New file.
	* src/org/eclipse/linuxtools/rpm/ui/editor/preferences/MacroProposalsPreferencePage.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/preferences/PreferenceConstants.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/preferences/PreferenceInitializer.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/preferences/RpmInformationsPreferencePage.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/preferences/RpmProposalsPreferencePage.java:
	Likewise.
	* src/org/eclipse/linuxtools/rpm/ui/editor/preferences/SpecTemplatePreferencePage.java:
	Likewise.
	* templates/templates.xml: Likewise. Templates for completion.

2007-03-28  Andrew Overholt  <overholt@redhat.com>

	Re-namespace to org.eclipse.linuxtools.rpm.ui.editor.

2007-03-15  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/SpecfileReconcilingStrategy.java: New file.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentOutlinePage.java
	(update): Run in an async thread.
	(.run): New method.
	* src/org/eclipse/cdt/rpm/editor/SpecfileConfiguration.java
	(getReconciler): New method.
	* src/org/eclipse/cdt/rpm/editor/SpecfileEditor.java
	(validateAndMark): Call getParser.
	(getParser): New method.
	(getAdapter): Call getOutlinePage.
	(getOutlinePage): New method.
	(setSpecfile): New method.

2007-01-06  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseSection): Special case the top level package so that it appears in the
	outline.

2007-01-06  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileSection.java: Rename thePackage
	field to parentPackage.
	(getPackage): Rename thePackage field to parentPackage.
	(toString): Ditto.
	(SpecfileSection): Ditto.
	(setPackage): Ditto.
	(getPackageName): New method.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfilePackage.java: Resubclass based
	on SpecfileSection instead of SpecfileElement and add a new field packageName.
	(getPackage): New method.
	(setPackageName): New method.
	(getPackageName): New method.
	(toString): Remove redundant code, change use of getName to getPackageName().
	(SpecfilePackage): Initialize new fields, pass "package" to super constructor.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfilePackageContainer.java
	(getPackage): Use getPackageName() instead of getName().
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseSection): Special case ParserPackages from other types of ParserSections.

2007-01-04  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfilePreamble.java: New file.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentProvider.java
	(getChildren): Add the preamble and sections to the children returned for a
	Specfile.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileLabelProvider.java
	(getText): Add "Preamble" as the returned text for SpecfilePreamble.
	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java
	(Specfile): Change preamble to a SpecfilePreamble from a SpecfileElement,
	intialize it in the constructor.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseSection): Add simple, but not complex, sections to the specfile with
	addSection(). Add complex section to a SpecfilePackage hierarchialy, and add the
	package to the specfile.
	(parse): Remove if block that dealt with SpecfileSections.
	(simpleSections): Add javadoc.
	(complexSections): Add javadoc.

2007-01-03  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfilePackageContainer.java: New file.
	Container for packages for use in the model and outline.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentProvider.java
	(SpecfileContentProvider): Set specfile in the constructor.
	(getElements): Use getChildren.
	(getChildren): Re-work outline to have Packages sub-category. Will further
	refine later.
	(hasChildren): Add knowledge of SpecfilePackage and SpecfilePackageContainer.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileLabelProvider.java
	(getText): Add SpecfilePackage and SpecfilePackageContainer.
	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java
	(getPackage): New method.
	(getPreamble): Likewise.
	(addPackage): Likewise.
	(Specfile): Likewise.
	(getPackages): Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseSection): Deal with -f, add package data to sections.
	(parse): Add packages to model.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfilePackage.java
	(SpecfilePackage): Add sections.
	(getSections): New method.
	(hasChildren): Likewise.
	(addSection): Likewise.
	(getLineEndPosition): Override to return the actual %package line.
	(getLineStartPosition): Likewise.

2006-12-19  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileSource.java
	(getFileName): Resolve macros.
	* src/org/eclipse/cdt/rpm/editor/SpecfileConfiguration.java
	(getPresentationReconciler): Cleanups.
	(getTextHover): Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileHover.java
	(findWord): Deal with macros without braces
	(ex. %patch).(getHoverInfo): Fix typo.

2006-12-18  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/SpecfilePartitionScanner.java: Remove the
	SPEC_DEFAULT partition type, as IDocument.EFAULT_CONTENT_TYPE fulfills this role.
	* src/org/eclipse/cdt/rpm/editor/SpecfileConfiguration.java
	(getConfiguredContentTypes): Fix to return
	SpecfilePartitionScanner.SPEC_PARTITION_TYPES instead of just the default
	partition type.
	* src/org/eclipse/cdt/rpm/editor/SpecfileHover.java
	(getHoverInfo): Change hover text to "<macro name>: <macro value". Add hover for
	patch and source declarations.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parse): Special case Epoch handling, now added to list of defines.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileSource.java: Change call to
	super constructor with String.

2006-12-04  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/SpecfileHover.java: New file. Hover support.
	* src/org/eclipse/cdt/rpm/editor/SpecfileConfiguration.java
	(SpecfileConfiguration): Add editor to constructor.
	(getTextHover): New method.
	* src/org/eclipse/cdt/rpm/editor/SpecfileEditor.java
	(SpecfileEditor): Add this object to configuration constructor call.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parse): Add version and release defines.

2006-11-07  Andrew Overholt  <overholt@redhat.com>

	Add license.
	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java: Add license.
	(setLicense): New method.
	(getLicense): Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseSimpleDefinition): Add license.
	(parse): Likewise.
	(parseDefine): Likewise.
	(parseLine): Likewise.

2006-10-04  Andrew Overholt  <overholt@redhat.com>

	* plugin.xml: Update ChangeLog parser extension to not use fully-qualified
	editor name.

2006-10-03  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentProvider.java
	(inputChanged): Don't parse; use SpecfileEditor's parsed Specfile instead.
	(SpecfileContentProvider): Take as input the ITextEditor rather than just the
	IDocumentProvider. Remove unused field variables.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentOutlinePage.java
	(createControl): Use updated SpecfileContentProvider constructor.
	* src/org/eclipse/cdt/rpm/editor/SpecfileEditor.java
	(editorSaved): Parse the document
	(validateAndMark) before updating the outline.* src/org/eclipse/cdt/rpm/editor/actions/SpecfileChangelogFormatter.java: Remove unused field variable.(getParsedSpecfile):
	Don't parse; use SpecfileEditor's parsed Specfile instead.
	* src/org/eclipse/cdt/rpm/editor/actions/SpecfileChangelogAction.java
	(createChangelogEntry): Don't parse; use SpecfileEditor's parsed Specfile
	instead.
	(run): Pass Specfile and not editor to createChangelogEntry; Fix typos.
	* src/org/eclipse/cdt/rpm/editor/actions/SpecfileEditorOrganizePatchesActionDelegate.java
	(setActiveEditor): Remove debugging output.
	(run): Likewise.

2006-10-03  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/actions/SpecfileEditorOrganizePatchesActionDelegate.java:
	New file.
	(setActiveEditor): New method.
	(run): Likewise.
	(selectionChanged): Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java:
	(printArray): New method.
	(getDocument): Likewise.
	(toString): Likewise.
	(getSourcesAsArray): Likewise.
	(setDocument): Likewise.
	(setSources): Likewise.
	(changeLine): Likewise.
	(organizePatches): Likewise.
	(getLine): Likewise.
	(getLineLength): Likewise.
	(getPatchesAsArray): Likewise.
	(setPatches): Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileSource.java
	(toString): Add declaration line.
	(getLineNumber): New method.
	(changeDeclaration): Likewise.
	(setLineNumber): Likewise.
	(changeReferences): Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parse): Fix line numbers. Record patch declaration line numbers.
	* plugin.xml: Add action for "Organize Patches" in editor context menu.
	* src/org/eclipse/cdt/rpm/editor/SpecfilePartitioner.java
	(connect): Don't print out the partitions.
	* src/org/eclipse/cdt/rpm/editor/SpecfileEditor.java
	(validateAndMark): Keep parsed specfile.
	(getSpecfile): New method.
	* src/org/eclipse/cdt/rpm/editor/SpecfileErrorHandler.java
	(getCharOffset): Fix line number calculations.

2006-09-19  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SourceComparator.java: New file.
	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java
	(printSources): New method.
	(printPatches): Likewise.
	(getSourcesAsList): Likewise.
	(getSourcesAsArray): Likewise.
	(getSources): Likewise.
	(getPatchesAsList): Likewise.
	(getPatches): Likewise.
	(getPatchesAsArray): Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileSource.java
	(toString): Add lines used.
	(getLinesUsed): New method.
	(removeLineUsed): Likewise.
	(addLineUsed): Likewise.
	(SpecfileSource): Initialize linesUsed.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parse): Add line numbers where patches and sources are used.

2006-09-19  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseComplexDefinition): Make lines that being with "Source" or "Patch" but do
	not have colons just warnings as we cannot tell the difference between these and
	Source or Patch directives with missing trailing colons.

2006-09-07  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/actions/SpecfileChangelogFormatter.java: Fix
	the case where there is no changelog section in the file as well as some minor
	formatting fixes.

2006-09-07  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/actions/SpecfileChangelogFormatter.java: New
	file.
	* src/org/eclipse/cdt/rpm/editor/actions/SpecfileChangelogParser.java: New,
	empty, file.
	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java: Initialize epoch to -1.
	* META-INF/MANIFEST.MF: Add exporting of the new
	org.eclipse.linuxtools.rpm.ui.editor.actions package. Add dependency on
	com.redhat.eclipse.changelog.core.
	* plugin.xml: Remove extension of the org.eclipse.ui.actionSets extension point,
	add extension of the com.redhat.eclipse.changelog.core.parserContribution and
	com.redhat.eclipse.changelog.core.formatterContribution extension points.
	* src/org/eclipse/cdt/rpm/editor/actions/SpecfileChangelogAction.java
	(createChangelogEntry): Use email and author name from changelog plugin,
	although in a very hacky way. Add option epoch to the version, add macro
	resolution in version, epoch and release.

2006-09-05  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileElement.java
	(resolve): Use reluctant regex to allow for multiple definitions to be resolved.
	* src/org/eclipse/cdt/rpm/editor/actions/SpecfileChangelogAction.java
	(createChangelogEntry): Resolve strings so we don't end up with variable
	definitions in the nvr string.

2006-09-04  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/actions/SpecfileChangelogAction.java: New file,
	implementing the changelog entry action.
	* icons/changelog.gif: New file.
	* plugin.xml: Add extension point for actionSet.

2006-09-04  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseSection): Add continue statement if no package name is found after -n.

2006-09-03  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentProvider.java: Remove
	unnecessary imports.
	* src/org/eclipse/cdt/rpm/editor/SpecfileDocumentProvider.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfilePartitionScanner.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileChangelogScanner.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseSimpleDefinition): Change use of illegal String.contains(String) to
	String.indexOf(String) > 0.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileTag.java
	(toString): Likewise.

2006-09-01  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseDefine): Remove colon from error messages.
	(parse): Don't output to console.
	(parseSimpleDefinition): Return after first error. Remove colon from error
	messages.

2006-08-31  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java
	(getSource): New method.
	(getPatch): Likewise.
	(addPatch): Likewise.
	(addSource): Likewise.
	(Specfile): Likewise. Add patches and sources maps.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(packageLevelDefinitions): Likewise.
	(parseMacro): Likewise.
	(parseSection): Likewise.
	(complexDefinitions): Likewise.
	(parsePatch): Likewise.
	(parseLine): Likewise.
	(simpleDefinitions): Likewise.
	(parseDefine): Likewise.
	(parse): Likewise.
	(parseSimpleDefinition): Likewise.
	(parseComplexDefinition): Likewise. Split up parser into multiple methods.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileTag.java
	(toString): Use resolve method.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParseException.java
	(SpecfileParseException): Add severity.
	(getSeverity): New method.
	(setSeverity): Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileErrorHandler.java
	(handleError): Use severity. Add severity.

2006-08-31  Andrew Overholt  <overholt@redhat.com>

	* META-INF/MANIFEST.MF: Add package exports to facilitate moving tests to new
	plugin.

2006-08-29  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/tests: Move tests to new plugin
	org.eclipse.linuxtools.rpm.ui.editor.tests.
	* .classpath: Remove JUnit from classpath.

2006-08-28  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseLine): Handle errors directly and do not throw exceptions.
	(parse): Pass lineNumber to parseLine for error handling.

2006-08-28  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentProvider.java
	(getParent): Set null root.
	(inputChanged): Add error handling.
	(getElements): Set null root.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentOutlinePage.java
	(update): Check for null input.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileLabelProvider.java
	(getText): Never return null.
	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java: Set default name value.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseLine): First cut of error handling.
	(parse): Likewise.
	(setErrorHandler): Likewise. Likewise.
	* META-INF/MANIFEST.MF: Add dependencies for error handling.
	* plugin.xml: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileEditor.java
	(doSetInput): First cut of error handling.
	(validateAndMark): Likewise.
	(getInputDocument): Likewise.
	(getInputFile): Likewise.
	(editorSaved): Likewise. Likewise.
	* src/org/eclipse/cdt/rpm/editor/AuthorEmailRule.java
	(evaluate): Add necessary cast.
	* src/org/eclipse/cdt/rpm/editor/VersionReleaseRule.java
	(evaluate): Likewise.

2006-08-21  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java
	(setVersion): New method.
	(getVersion): Likewise.
	(setRelease): Likewise.
	(getDefine): Likewise.
	(addDefine): Likewise.
	(getRelease): Likewise.
	(Specfile): Add version, release, and defines.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileSection.java
	(SpecfileSection): Add specfile to constructor.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseLine): Add specfile argument.
	(parse): Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfilePackage.java
	(SpecfilePackage): Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/tests/HeaderRecognitionTest.java
	(testGetComplexSectionName2): Likewise.
	(testGetComplexSectionName4): Likewise.
	(testGetComplexSectionName5): Likewise.
	(testGetSimpleSectionName): Likewise.
	(testGetComplexSectionName6): Likewise.
	(testGetComplexSectionName3): Likewise.
	(testGetComplexSectionName7): Likewise.
	(testGetComplexSectionName1): Likewise. Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/tests/EpochTagTest.java
	(testNonIntegerEpoch): Likewise.
	(testMultipleEpochsTag): Likewise.
	(testMultipleEpochsTag2): Likewise.
	(testEpochTag2): Likewise.
	(testNonIntegerEpoch2): Likewise.
	(testNullEpochTag2): Likewise.
	(testNullEpochTag): Likewise.
	(testEpochTag): Likewise. Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileTag.java
	(SpecfileTag): Likewise.
	(setTagType): New method.
	(getTagType): Likewise.
	(getStringValue): Likewise.
	(toString): Use tag type to determine return value.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileElement.java
	(getSpecfile): New method.
	(resolve): Likewise. Resolve variable definitions.
	(setSpecfile): Likewise.
	(getName): Use resolve.
	* src/org/eclipse/cdt/rpm/editor/parser/tests/NameTagTest.java
	(testNameTag2): Add specfile argument.
	(testMultipleNamesTag2): Likewise.
	(testNameTag): Likewise.
	(testMultipleNamesTag): Likewise.
	(testNullNameTag2): Likewise.
	(testNullNameTag): Likewise.
	(testResolvedSetName):
	(testResolvedNameTag): Add specfile field.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileDefine.java: New file.
	* src/org/eclipse/cdt/rpm/editor/parser/tests/DefineTests.java: New file.
	* src/org/eclipse/cdt/rpm/editor/parser/tests/ReleaseTagTests.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/tests/VersionTagTests.java: Likewise.

2006-08-20  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java
	(setEpoch): New method.
	(getEpoch): Likewise. Add epoch field variable.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java
	(parseLine): Handle epochs.
	(parse): Likewise. Clean up imports and remove unused args variable.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileTag.java
	(setIntValue): New method. Handle tags that have integer values.
	(getIntValue): Likewise.
	(toString): Modify to handle integer and string tags.
	(SpecfileTag): Modify constructors for integer and string values.
	(setStringValue): Refactor setValue.
	(getStringValue): Likewise. Add tagType field variable.
	* src/org/eclipse/cdt/rpm/editor/parser/tests/NameTagTest.java
	(testNameTag2): Modify to use SpecfileTag.getStringValue;
	(testNameTag): Likewise.
	* src/org/eclipse/cdt/rpm/editor/parser/tests/EpochTagTest.java: New file. Tests
	for epoch tag handling.

2006-08-18  Andrew Overholt  <overholt@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/parser/tests/NameTagTest.java: Add new file.
	* src/org/eclipse/cdt/rpm/editor/parser/tests/HeaderRecognitionTest.java: Ditto.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileTag.java: Ditto.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileSection.java: Ditto.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileParser.java : Ditto.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfilePackage.java: Ditto.
	* src/org/eclipse/cdt/rpm/editor/parser/SpecfileElement.java: Ditto.
	* src/org/eclipse/cdt/rpm/editor/parser/Specfile.java: Ditto.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileLabelProvider.java: Ditto.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentProvider.java: Ditto.
	* src/org/eclipse/cdt/rpm/editor/outline/SpecfileContentOutlinePage.java: Ditto.
	* src/org/eclipse/cdt/rpm/editor/SpecfileEditor.java
	(getAdapter): Add method.
	* .classpath: Add dependency on JUnit.
	* META-INF/MANIFEST.MF: Add dependency on org.eclipse.ui.views.

2006-08-12  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/VersionReleaseRule.java: Fixed bug with the
	handling of trailing space following the version-release.
	* src/org/eclipse/cdt/rpm/editor/AuthorEmailRule.java: Added rudimentary
	checking for valid email addresses, and fixed a few hanging bugs when removing
	the '<', '@', '.', or '>' characters from the email address.

2006-08-12  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/SpecfileScanner.java: Minor doc fixes.
	* src/org/eclipse/cdt/rpm/editor/SpecfileConfiguration.java: Added a reference
	to a SpecfileChangelogScanner. Added a damager/repairer pair for the %files and
	%changelog sections.
	* src/org/eclipse/cdt/rpm/editor/ISpecfileColorConstants.java: Removed leftover
	constants from XML editor example, added constants for changelog colouring.
	* src/org/eclipse/cdt/rpm/editor/AuthorEmailRule.java: New file.
	* src/org/eclipse/cdt/rpm/editor/VersionReleaseRule.java: New file.
	* src/org/eclipse/cdt/rpm/editor/SpecfileChangelogScanner.java: New file.
	* src/org/eclipse/cdt/rpm/editor/SpecfileTagScanner.java: Commented the whole
	file, as I think it's unused.

2006-08-12  Igor Foox  <ifoox@redhat.com>

	* src/org/eclipse/cdt/rpm/editor/SpecfilePartitionScanner.java: Fixed
	partitioning with a simple initial partitioning scheme.
	* src/org/eclipse/cdt/rpm/editor/SpecfileDocumentProvider.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileConfiguration.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SectionRule.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfilePartitioner.java: New file, adds
	debugging output to partitioning.

2006-08-02  Andrew Overholt  <overholt@redhat.com>

	* .settings/org.eclipse.jdt.core.prefs: Initial commit.
	* src/org/eclipse/cdt/rpm/editor/TagWordDetector.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileConfiguration.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/ColorManager.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/NonRuleBasedDamagerRepairer.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SectionRule.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfilePartitionScanner.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/StringWithEndingRule.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileWhitespaceDetector.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileDoubleClickStrategy.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileTagScanner.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/TagRule.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/IStrictWordDetector.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/Activator.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/MacroWordDetector.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileDocumentProvider.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileScanner.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/PatchNumberDetector.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SpecfileEditor.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/SuffixNumberDetector.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/ISpecfileColorConstants.java: Likewise.
	* src/org/eclipse/cdt/rpm/editor/KeywordWordDetector.java: Likewise.
	* build.properties: Likewise.
	* .project: Likewise.
	* ChangeLog: Likewise.
	* plugin.xml: Likewise.
	* icons/rpm.gif: Likewise.
	* META-INF/MANIFEST.MF: Likewise.
	* .classpath: Likewise.
	* .cvsignore: Likewise.