global serial
global startTime
global finalTime
global markedMessages
global callArray
global currentDepth


function callFunction(probefunc) {
	if (startTime == 0) {
		startTime = gettimeofday_ns()
		printf("<%s,,%d,,%d;", probefunc, serial, startTime)
	} else
	    printf("<%s,,%d,,%d;", probefunc, serial, gettimeofday_ns())
	currentDepth++
	callArray[currentDepth] = serial
	serial++
}

function returnFunction(probefunc) {
	finalTime = gettimeofday_ns()
	printf(">%s,,%d;", probefunc, finalTime)
	currentDepth--
}


probe end {
	printf("\n%d",finalTime);
	printf("\n%d\n",finalTime - startTime);
	foreach (num in markedMessages) {
		printf("%d:%s;", num, markedMessages[num]);
	}
    exit()
}
probe syscall.exit {
if (pid() == target()) {
finalTime = gettimeofday_ns()
}
}